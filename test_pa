import sys
import os
import tkinter as tk
from tkinter import simpledialog, messagebox
import urllib.request

class MenuGUI:
    def __init__(self, root):
        self.root = root
        self.root.title("Menu")
        self.root.geometry("900x900")

        self.menu_label = tk.Label(self.root, text="Select from the menu:")
        self.menu_label.pack()

        self.menu_options = tk.Listbox(self.root)
        self.menu_options.insert(1, "Information Gathering")
        self.menu_options.insert(11, "Other")
        self.menu_options.insert(12, "Exit")
    
        self.menu_options.pack()

        self.select_button = tk.Button(self.root, text="Select", command=self.handle_selection)
        self.select_button.pack()

    def handle_selection(self):
        selection = self.menu_options.curselection()
        if selection:
            choice = self.menu_options.get(selection)
            if choice == "Information Gathering":
                self.info()
            elif choice == "Password Attacks":
                self.passwd()
            elif choice == "Wireless Testing":
                self.wire()
            elif choice == "Exploitation Tools":
                self.exp()
            elif choice == "Sniffing & Spoofing":
                self.snif()
            elif choice == "Web Hacking":
                self.webhack()
            elif choice == "Private Tools":
                self.tnn()
            elif choice == "Post Exploitation":
                self.postexp()
            elif choice == "Recon":
                self.sniper()
            elif choice == "Other":
                self.others()
            elif choice == "Exit":
                sys.exit()

    
    def sniper(self):
        messagebox.showinfo("Sniper", "This tool is only available for Linux / OSX or similar systems. Do you want to continue?")
        choice_sniper = messagebox.askyesno("Continue?", "Do you want to continue?")
        if choice_sniper:
            os.system("git clone https://github.com/1N3/Sn1per.git")
            os.system("cd Sn1per && sudo bash ./install.sh")
            os.system("sniper")
        else:
            self.root.mainloop()



    def generate_report(self, category):
        # Dummy report generation, replace with actual report generation code
        report_filename = f"{category}_report.html"
        with open(report_filename, "w") as report_file:
            report_file.write(f"<html><head><title>{category} Report</title></head><body>")
            report_file.write(f"<h1>{category} Report</h1>")
            report_file.write("<p>This is a dummy report. Replace it with actual content.</p>")
            report_file.write("</body></html>")
        messagebox.showinfo("Report Generated", f"HTML report for {category} has been generated: {report_filename}")

def scanusers():
    site = input('Enter a website : ')
    try:
        users = site
        if 'http://www.' in users:
            users = users.replace('http://www.', '')
        if 'http://' in users:
            users = users.replace('http://', '')
        if '.' in users:
            users = users.replace('.', '')
        if '-' in users:
            users = users.replace('-', '')
        if '/' in users:
            users = users.replace('/', '')
        while len(users) > 2:
            print(users)
            resp = urllib.request.urlopen(site + '/cgi-sys/guestbook.cgi?user=%s' % users).read()
            # Je peux également utiliser une expression régulière
            if 'invalid username' not in resp.lower():
                print("\tFound -> %s" % users)
                pass

            users = users[:-1]
    except Exception as e:
        print(e)
        
        

root = tk.Tk()
menu_gui = MenuGUI(root)
root.mainloop()
